//funciones productos
document.write(
	`<script src="${base_url}/Assets/js/plugins/JsBarcode.all.min.js"></script>`
);
let tableProductos;
let rowTable = "";
$(document).on("focusin", function (e) {
	if ($(e.target).closest(".tox-dialog").length) {
		e.stopImmediatePropagation();
	}
});

tinymce.init({
	selector: "#txtDescripcion",
	width: "100%",
	height: 400,
	statubar: true,
	plugins: [
		"advlist autolink link image lists charmap print preview hr anchor pagebreak",
		"searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
		"save table contextmenu directionality emoticons template paste textcolor",
	],
	toolbar:
		"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons",
});

function fntCategorias() {
	if (document.querySelector("#listCategoria")) {
		let ajaxUrl = base_url + "/Categorias/getSelectCategorias";
		let request = window.XMLHttpRequest
			? new XMLHttpRequest()
			: new ActiveXObject("Microsoft.XMLHTTP");
		request.open("GET", ajaxUrl, true);
		request.send();
		request.onreadystatechange = function () {
			if (request.readyState == 4 && request.status == 200) {
				document.querySelector("#listCategoria").innerHTML =
					request.responseText;
				$("#listCategoria").selectpicker("render");
			}
		};
	}
}

function fntBarcode() {
	let codigo = document.querySelector("#txtCodigo").value;
	JsBarcode("#barcode", codigo);
}

function fntPrintBarcode(area) {
	let elemntArea = document.querySelector(area);
	let vprint = window.open(" ", "popimpr", "height=400,width=600");
	vprint.document.write(elemntArea.innerHTML);
	vprint.document.close();
	vprint.print();
	vprint.close();
}

function openModal() {
	rowTable = "";
	document.querySelector("#idProducto").value = "";
	document
		.querySelector(".modal-header")
		.classList.replace("headerUpdate", "headerRegister");
	document
		.querySelector("#btnActionForm")
		.classList.replace("btn-info", "btn-primary");
	document.querySelector("#btnText").innerHTML = "Guardar";
	document.querySelector("#titleModal").innerHTML = "Nuevo Producto";
	document.querySelector("#formProductos").reset();
	document.querySelector("#divBarCode").classList.add("notblock");
	document.querySelector("#containerGallery").classList.add("notblock");
	document.querySelector("#containerImages").innerHTML = "";
	$("#modalFormProductos").modal("show");
}
